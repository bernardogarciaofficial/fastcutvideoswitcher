<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Song Upload Demo</title>
</head>
<body>
  <input type="file" id="songInput" accept="audio/*">
  <button id="uploadSongBtn" disabled>Upload Song</button>
  <div id="uploadStatus"></div>
  <audio id="audio" controls style="display:none"></audio>
  <script>
    let selectedSongFile = null;
    const songInput = document.getElementById('songInput');
    const uploadSongBtn = document.getElementById('uploadSongBtn');
    const uploadStatus = document.getElementById('uploadStatus');
    const audio = document.getElementById('audio');

    songInput.onchange = function(e) {
      const file = e.target.files[0];
      selectedSongFile = file;
      if (file) {
        audio.src = URL.createObjectURL(file);
        audio.style.display = 'block';
        audio.load();
        uploadSongBtn.disabled = false;
      } else {
        uploadSongBtn.disabled = true;
      }
    };

    uploadSongBtn.onclick = async function() {
      if (!selectedSongFile) return;
      const formData = new FormData();
      formData.append('song', selectedSongFile);
      uploadStatus.textContent = "Uploading...";
      try {
        // CHANGE THIS URL to match your backend
        const response = await fetch('/upload-song', {
          method: 'POST',
          body: formData
        });
        if (response.ok) {
          uploadStatus.textContent = "Song uploaded successfully!";
        } else {
          uploadStatus.textContent = "Song upload failed.";
        }
      } catch (err) {
        uploadStatus.textContent = "Error uploading song: " + err.message;
      }
    };
  </script>
</body>
</html>
