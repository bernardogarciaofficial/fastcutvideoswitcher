<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>🎬 FastCut Music Video Switcher</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Orbitron:700|Montserrat:400,700&display=swap">
  <!-- Firebase App (core) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <!-- Firebase Firestore -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <!-- Firebase Storage -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
</head>
<body>
  <div class="theme-bg"></div>
  <div class="set-lights">
    <div class="spotlight spotlight-left"></div>
    <div class="spotlight spotlight-right"></div>
    <div class="spotlight spotlight-top"></div>
  </div>
  <header class="hollywood-header">
    <span class="camera-icon">🎥</span>
    <h2>FastCut Music Video Switcher</h2>
    <span class="clapperboard-icon">🎬</span>
    <div class="lights-action">LIGHTS <span class="dot">•</span> CAMERA <span class="dot">•</span> ACTION!</div>
    <div class="members-counter" id="membersCounter">
      <span class="counter-icon">🧑‍🤝‍🧑</span>
      <span id="membersCountNumber">15,347</span> members online
    </div>
  </header>

  <div class="instant-edit-banner">
    get your music video filmed and edited instantly—no more long waits or video editing delay
  </div>

  <!-- AD THUMBNAILS: MAIN BLOCK -->
  <section class="gig-ad-section highlight-ad-section">
    <h2 class="gig-ad-title">🎥 Advertise Your Gig!</h2>
    <div class="gig-ad-howto">
      <b>Get your gig in front of thousands of musicians and fans instantly!</b><br><br>
      <b>How to advertise:</b>
      <ol>
        <li><b>Upload</b> a looping promo video (MP4/WebM, 5–30 seconds, horizontal).</li>
        <li>Anyone can <b>replace</b> your ad by uploading to the same slot—unless you <b>lock</b> it below for exclusivity!</li>
        <li>Locked ads are <b>promoted</b> across the homepage, sidebar, and video export screens for maximum exposure.</li>
        <li>Tip: Use a short, catchy video with your gig info and contact/QR code for best results.</li>
      </ol>
      <span style="color:#b8e2ff;">Tip: Use a short, catchy video with your gig info and contact/QR code for best results.</span>
    </div>
    <div class="gig-ad-grid" id="gigAdGrid"></div>
    <div class="gig-ad-demo-note" id="gigAdDemoNote" style="display:none;">
      <b>Demo:</b> No ads uploaded yet. Be the first to upload your gig ad!
    </div>
  </section>

  <!-- SIDEBAR AD BLOCK -->
  <aside class="sidebar-ads">
    <div class="sidebar-ad-title">🎵 Featured Gigs</div>
    <div id="sidebarAdSlots"></div>
  </aside>

  <!-- Step 1: Audio Upload -->
  <section class="audio-track-block">
    <label for="songInput" style="font-weight:600;">🎵 Main Music Track:</label>
    <input type="file" id="songInput" accept=".mp3,.wav,.ogg,.m4a,.aac,.flac,.aiff,audio/*">
    <span id="audioStatus"></span>
    <audio id="audio" style="display:none;" controls></audio>
  </section>

  <!-- Main Video Recording Screen -->
  <section class="main-recorder-section">
    <h3>After each take is recorded, click 'download' to save it to your computer—and don't forget to name your take</h3>
    <video id="mainRecorderPreview" width="600" height="340" autoplay muted></video>
    <div class="main-recorder-controls">
      <button id="mainRecorderRecordBtn" class="main-recorder-btn custom-record-btn">⏺️ Record</button>
      <button id="mainRecorderStopBtn" class="main-recorder-btn custom-stop-btn" disabled>⏹️ Stop</button>
      <button id="mainRecorderDownloadBtn" class="main-recorder-btn custom-download-btn" disabled>⬇️ Download</button>
      <span id="mainRecorderStatus" class="main-recorder-status"></span>
    </div>
    <div class="take-instructions">
      <span>After each take is recorded, click 'download' to save it to your computer—and don't forget to name your take</span>
    </div>
  </section>

  <!-- Step 2: Upload Takes for 6-Track Switching -->
  <section class="switcher-upload-section">
    <h3>Easily upload each take right here</h3>
    <div id="switcherTracks" class="switcher-track-grid-row"></div>
  </section>

  <!-- Step 3: Live Switch and Record -->
  <div class="switcher-control-section">
    <div class="fastcut-switcher-row" id="fastcutSwitcher"></div>
    <div class="switcher-live-controls">
      <button id="startSwitchingBtn" class="live-switch-btn record-btn">⏺️ Start Switching</button>
      <button id="stopSwitchingBtn" class="live-switch-btn stop-btn" disabled>⏹️ Stop Switching</button>
    </div>
    <div class="switching-instructions">
      <b>How it works:</b> Once all takes are uploaded, click Start Switching, then switch cameras live by pressing the camera buttons below. When you're done, click Stop Switching to generate your master video!
    </div>
    <div id="switchingError" style="color:#e53935;font-weight:bold;"></div>
  </div>

  <!-- BELOW MASTER OUTPUT AD SLOTS -->
  <div id="spreadAdSlotsBelow"></div>

  <!-- MASTER OUTPUT VIDEO -->
  <section class="master-output-section">
    <h3 class="output-title">Master Output Video <span class="filmstrip">🎞️</span></h3>
    <canvas id="mixCanvas" width="720" height="405" style="display:none;"></canvas>
    <video
      id="masterOutputVideo"
      width="720"
      height="405"
      controls
      style="background:#181c23; border-radius:16px; border:3px solid #ffe57f; box-shadow:0 4px 24px #000a; display:block; margin:0 auto;"
      poster="master_output_poster.png"
    >
      Your browser does not support the video tag.
    </video>
    <button id="exportMusicVideoBtn" class="export-music-btn">Export Music Video</button>
    <span class="export-status" id="exportStatus"></span>
  </section>

  <!-- FOOTER AD SLOTS -->
  <div id="footerAdSlots"></div>

  <!-- SYNC INSTRUCTIONS -->
  <div class="sync-instructions">
    <b>How to Fix Audio/Video Sync in Your Editor:</b>
    <ol>
      <li>Import your exported FastCut video into your video editor.</li>
      <li>Right-click the video clip and choose "Unlink" or "Detach Audio".</li>
      <li>Select the audio track and move it forward by about 5–6 frames (about 0.2 seconds), or until the music matches the video action.</li>
      <li>Tip: In most editors, you can nudge the audio by single frames using the arrow keys.</li>
    </ol>
  </div>

  <!-- FOOTER -->
  <footer class="hollywood-footer">
    <span class="clapperboard-icon">🎬</span>
    <span>FastCut by <b>bernardogarciaofficial</b> | <span class="camera-icon">🎥</span></span>
    <span class="footer-email">bernardogarciagarcia441@gmail.com</span>
  </footer>
  <script src="script.js"></script>
</body>
</html>
