<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>🎬 FastCut Music Video Switcher</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Orbitron:700|Montserrat:400,700&display=swap">
</head>
<body>
  <div class="theme-bg"></div>
  <div class="set-lights">
    <div class="spotlight spotlight-left"></div>
    <div class="spotlight spotlight-right"></div>
    <div class="spotlight spotlight-top"></div>
  </div>

  <header class="hollywood-header">
    <span class="camera-icon">🎥</span>
    <h2>FastCut Music Video Switcher</h2>
    <span class="clapperboard-icon">🎬</span>
    <div class="lights-action">LIGHTS, CAMERA, ACTION <span class="dot">.</span></div>
  </header>

  <section class="instant-edit-banner">
    Instantly record, upload, and switch between video takes synced to your song.<br>
    <span id="membersCountNumber">15,347</span> musicians have joined the FastCut revolution!
  </section>

  <!-- GIG AD SECTION -->
  <section class="gig-ad-section">
    <h2 class="gig-ad-title">Advertise Your Gig!</h2>
    <p class="gig-ad-desc">
      Upload a looping ad video for your gig below. Anyone can replace your ad by uploading to the same slot—unless you lock it in by paying for exclusivity! If you lock your ad, it will be promoted across the platform for extra exposure.<br>
      <small><em>Ad videos are visible and playable for everyone, everywhere, until replaced.</em></small>
    </p>
    <div class="gig-ad-grid" id="gigAdGrid"></div>
  </section>

  <!-- SIDEBAR ADS -->
  <aside class="sidebar-ads" id="sidebarAds">
    <div class="sidebar-ad-title">Promoted Gigs</div>
    <div id="sidebarAdSlots"></div>
  </aside>

  <!-- AUDIO TRACK UPLOAD -->
  <section class="audio-track-block">
    <h3><span class="music-icon">🎵</span> Upload Your Backing Track</h3>
    <input type="file" id="songInput">
    <span id="audioStatus"></span>
    <audio id="audio" controls style="margin:10px auto;display:none;"></audio>
  </section>

  <!-- MAIN VIDEO RECORDER -->
  <section class="main-recorder-section">
    <h3>after each take is recorded,click 'download' to save it to your computer-and don't forget to name your take</h3>
    <video id="mainRecorderPreview" width="330" height="220"></video>
    <div class="main-recorder-controls">
      <button id="mainRecorderRecordBtn" class="main-recorder-btn custom-record-btn">Record</button>
      <button id="mainRecorderStopBtn" class="main-recorder-btn custom-stop-btn" disabled>Stop</button>
      <button id="mainRecorderDownloadBtn" class="main-recorder-btn custom-download-btn" disabled>Download</button>
      <span class="main-recorder-status" id="mainRecorderStatus"></span>
    </div>
    <div class="take-instructions"><span>after each take is recorded,click 'download' to save it to your computer—and don't forget to name your take</span></div>
  </section>

  <!-- SWITCHER TAKES UPLOAD -->
  <section class="switcher-upload-section">
    <h3>easyly upload each take right here</h3>
    <div class="switcher-track-grid-row" id="switcherTracks"></div>
  </section>

  <!-- SWITCHER CONTROL -->
  <section class="switcher-control-section">
    <div class="fastcut-switcher-row" id="fastcutSwitcher"></div>
    <div class="switcher-live-controls">
      <button id="startSwitchingBtn" class="live-switch-btn record-btn"><span>●</span> Start Live Switch</button>
      <button id="stopSwitchingBtn" class="live-switch-btn stop-btn" disabled>■ Stop & Export</button>
      <span class="export-status" id="exportStatus"></span>
    </div>
    <div class="switching-instructions">
      Click a track button above to switch shots live as your music video plays.<br>
      When finished, export your master video below!
    </div>
    <div id="switchingError" style="color:#e53935;font-weight:bold;"></div>
  </section>

  <!-- MASTER OUTPUT SECTION -->
  <section class="master-output-section">
    <h3 class="output-title"><span class="filmstrip">🎞️</span> Your Master Music Video</h3>
    <video id="masterOutputVideo" width="520" height="310" controls style="margin:10px auto;display:block;"></video>
    <canvas id="mixCanvas" width="520" height="310" style="display: none;"></canvas>
    <button class="export-music-btn" id="exportMusicVideoBtn">⬇️ Download Exported Video</button>
    <span class="export-status" id="exportStatus"></span>
    <div id="spreadAdSlotsBelow"></div>
  </section>

  <!-- FOOTER ADS -->
  <footer>
    <div id="footerAdSlots"></div>
    <div class="hollywood-footer">
      FastCut Music Video Switcher &copy; 2025
      <div class="footer-email">support@fastcut.app</div>
    </div>
  </footer>

  <!-- Firebase libraries -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
  <script src="script.js"></script>
</body>
</html>
